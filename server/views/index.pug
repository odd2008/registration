doctype html
html.no-js(lang='zh-CN')
  head
    meta(charset='utf-8')
    <base href="/">
    meta(http-equiv='x-ua-compatible', content='ie=edge')
    title 扭转乾坤
    link(rel="icon name", href="https://www.easyicon.net/api/resizeApi.php?id=556260&size=128")
    meta(name='description', content='')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    script.
      function detectIE() {
        
        var ua = window.navigator.userAgent;
        var msie = ua.indexOf('MSIE ');
        if (msie > 0) {
          // IE 10 or older => return version number
          document.documentElement.className += ' ie-hack';
          return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
        }
        var trident = ua.indexOf('Trident/');
        if (trident > 0) {
          // IE 11 => return version number
          var rv = ua.indexOf('rv:');
          return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
        }
        var edge = ua.indexOf('Edge/');
        if (edge > 0) {
          // Edge (IE 12+) => return version number
          return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);
        }
        // other browser
        return false;
      }
    script.
      if(detectIE() && detectIE() <= 11){
        Number.isNaN = Number.isNaN || function(value) {
          return typeof value === "number" && isNaN(value);
        }
      }
    style(type="text/css").
      .ie-hack > body{
        position:relative;
        height:auto;
      }
      .compatibleBody{
        background-color:rgba(0,0,0,.6);
        position:absolute;
        top:0;
        left:0;
        bottom:0;
        right:0;
        z-index:1111;
        display : none;
      }
      .compatibleBox{
          width: 600px;
          margin:100px auto;
          background-color:#fff;
          position:absolute;
          z-index:111;
          top:50px;
          left:50%;
          margin-left:-300px;
      }
      .compatibleBox .itemBox{
          display:flex;
          padding:20px 0 0px 0;
          justify-content: space-around;
      }
      .compatibleBox .itemBox .list{
        width:25%;
        float:left;
      }
      .compatibleBox .title{
          background:#eeeeee;
          padding:10px 15px;
          color:#9b9b9b;
         
      }
      .compatibleBox .itemBox .list a{
          display:block;
          font-size:14px;
          color:#000;
          text-decoration: none;
          text-align: center;
           height: 58px;
      }
      .compatibleBox .itemBox .list a:hover{
          color:#444;
      }
      .compatibleBox .title{
          display:flex;
          justify-content: space-between;
          font-size:12px;
      }
      .compatibleBox .compatibleContainer p{
          text-align:center;
          font-size:14px;
      }
      .compatibleBox .download{
          padding-top:10px;
      }
  body
    div.compatibleBody#compatibleBody
      div.compatibleBox
        div.title
          span 提示
        div.compatibleContainer
          p 您好，您使用的浏览器版本过低，请升级浏览器至最新版本或下载其它兼容浏览器
          div.itemBox
            div.list
              a(href="http://www.google.cn/chrome/browser/desktop/index.html")
                img(data-src="//goss.vcg.com/html/images/newweb/chrome.svg")
              a(href="http://www.google.cn/chrome/browser/desktop/index.html") 立即下载
            div.list
              a(href="http://www.firefox.com.cn/")
                img(data-src="//goss.vcg.com/html/images/newweb/firefox.svg")
              a(href="http://www.firefox.com.cn/") 立即下载
            div.list
              a(href="http://se.360.cn/")
                img(data-src="//goss.vcg.com/html/images/newweb/360.svg")
              a 立即下载
            div.list
              a(href="https://support.microsoft.com/zh-cn/help/17621")
                img(data-src="//goss.vcg.com/html/images/newweb/ie.svg")
              a(href="https://support.microsoft.com/zh-cn/help/17621") 立即下载
    script.
      if(detectIE() && detectIE() <= 10){
        var compatibleEl = document.getElementById('compatibleBody'); 
        compatibleEl.style.display = 'block';
        var browserImages = compatibleEl.getElementsByTagName('img'); 
        for(var i=0;i<browserImages.length;i+=1){
          browserImages[i].setAttribute('src',browserImages[i].getAttribute('data-src'));
        }
      }
    style#jss-server-side.
      !{css}
    #root !{html}

    script.
      window._ASYNC_FETCH = !{_async_fetch}; //是否为刷新页面加载
      window.__PRELOADED_STATE__ = !{preloadedState}
    each src in bundles 
      script(src=`\/${src}`)
    script.
      window.main();
    script.
      (function (para) {
        var p = para.sdk_url, n = para.name, w = window, d = document, s = 'script', x = null, y = null;
        w['sensorsDataAnalytic201505'] = n;
        w[n] = w[n] || function (a) { return function () { (w[n]._q = w[n]._q || []).push([a, arguments]); } };
        var ifs = ['track', 'quick', 'register', 'registerPage', 'registerOnce', 'clearAllRegister', 'trackSignup', 'trackAbtest', 'setProfile', 'setOnceProfile', 'appendProfile', 'incrementProfile', 'deleteProfile', 'unsetProfile', 'identify', 'login', 'logout', 'trackLink', 'clearAllRegister', 'getAppStatus'];
        for (var i = 0; i < ifs.length; i++) {
          w[n][ifs[i]] = w[n].call(null, ifs[i]);
        }
        if (!w[n]._t) {
          x = d.createElement(s), y = d.getElementsByTagName(s)[0];
          x.async = 1;
          x.src = p;
          x.setAttribute('charset', 'UTF-8');
          y.parentNode.insertBefore(x, y);
          w[n].para = para;
        }
      })({
        show_log:false,
        sdk_url: 'https://static.sensorsdata.cn/sdk/1.8.14/sensorsdata.min.js',
        name: 'sa',
        web_url: 'http://sensorsdata.vcg.com/?project=Vcgzhengshi',
        server_url: 'https://sensorsdata.vcg.com/sa?project=Vcgzhengshi',
        heatmap: {}
      });
      sa.quick('autoTrack');
    script(src='https://www.googletagmanager.com/gtag/js?id=UA-112420443-1',async)
    script.
      <!-- Global site tag (gtag.js) - Google Analytics -->
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-112420443-1');
      gtag('set', { 'user_id': '!{userId}' }); // 使用已登录的 user_id 来设置用户 ID。
    script.
      <!-- Google Tag Manager -->
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-M4XX32W');
      <!-- End Google Tag Manager -->
    noscript
      iframe(src="https://www.googletagmanager.com/ns.html?id=GTM-M4XX32W", frameborder="0" width="0" height="0")

